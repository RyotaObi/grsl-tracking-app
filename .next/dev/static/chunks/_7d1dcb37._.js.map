{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Documents/my-app/components/map-wrapper.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport dynamic from \"next/dynamic\"\r\nimport type { LocationData } from \"@/lib/types\"\r\nimport type { Map as LeafletMap } from \"leaflet\"\r\n\r\ninterface MapProps {\r\n  locations: LocationData[]\r\n  plannedRoute?: [number, number][]\r\n  onMapReady?: (map: LeafletMap) => void\r\n  userLocation?: { lat: number; lng: number } | null\r\n}\r\n\r\nconst Map = dynamic(() => import(\"@/components/map\"), {\r\n  ssr: false,\r\n  loading: () => (\r\n    <div className=\"w-full h-full flex items-center justify-center bg-gray-100\">\r\n      <div className=\"text-gray-600\">地図を読み込んでいます...</div>\r\n    </div>\r\n  ),\r\n})\r\n\r\nexport function MapWrapper(props: MapProps) {\r\n  return <Map {...props} />\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;AAFA;;;AAaA,MAAM,MAAM,IAAA,6KAAO,EAAC;;;;;;IAClB,KAAK;IACL,SAAS,kBACP,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;0BAAgB;;;;;;;;;;;;KAJ/B;AASC,SAAS,WAAW,KAAe;IACxC,qBAAO,6LAAC;QAAK,GAAG,KAAK;;;;;;AACvB;MAFgB","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Documents/my-app/lib/utils/simplify-route.ts"],"sourcesContent":["// Douglas-Peucker アルゴリズムを使用してルートを簡略化\r\nexport function simplifyRoute(\r\n  points: { lat: number; lng: number }[],\r\n  tolerance = 0.0001,\r\n): { lat: number; lng: number }[] {\r\n  if (points.length <= 2) {\r\n    return points\r\n  }\r\n\r\n  // 最初と最後のポイントを結ぶ線からの最大距離を持つポイントを見つける\r\n  let maxDistance = 0\r\n  let maxIndex = 0\r\n  const start = points[0]\r\n  const end = points[points.length - 1]\r\n\r\n  for (let i = 1; i < points.length - 1; i++) {\r\n    const distance = perpendicularDistance(points[i], start, end)\r\n    if (distance > maxDistance) {\r\n      maxDistance = distance\r\n      maxIndex = i\r\n    }\r\n  }\r\n\r\n  // 最大距離がtoleranceより大きい場合、再帰的に分割\r\n  if (maxDistance > tolerance) {\r\n    const left = simplifyRoute(points.slice(0, maxIndex + 1), tolerance)\r\n    const right = simplifyRoute(points.slice(maxIndex), tolerance)\r\n\r\n    // 結合（中間のポイントを重複させないため、leftの最後を除く）\r\n    return [...left.slice(0, -1), ...right]\r\n  } else {\r\n    // toleranceより小さい場合、最初と最後のポイントだけを返す\r\n    return [start, end]\r\n  }\r\n}\r\n\r\n// ポイントから線分への垂直距離を計算\r\nfunction perpendicularDistance(\r\n  point: { lat: number; lng: number },\r\n  lineStart: { lat: number; lng: number },\r\n  lineEnd: { lat: number; lng: number },\r\n): number {\r\n  const x = point.lng\r\n  const y = point.lat\r\n  const x1 = lineStart.lng\r\n  const y1 = lineStart.lat\r\n  const x2 = lineEnd.lng\r\n  const y2 = lineEnd.lat\r\n\r\n  const A = x - x1\r\n  const B = y - y1\r\n  const C = x2 - x1\r\n  const D = y2 - y1\r\n\r\n  const dot = A * C + B * D\r\n  const lenSq = C * C + D * D\r\n\r\n  let param = -1\r\n  if (lenSq !== 0) {\r\n    param = dot / lenSq\r\n  }\r\n\r\n  let xx, yy\r\n\r\n  if (param < 0) {\r\n    xx = x1\r\n    yy = y1\r\n  } else if (param > 1) {\r\n    xx = x2\r\n    yy = y2\r\n  } else {\r\n    xx = x1 + param * C\r\n    yy = y1 + param * D\r\n  }\r\n\r\n  const dx = x - xx\r\n  const dy = y - yy\r\n\r\n  return Math.sqrt(dx * dx + dy * dy)\r\n}\r\n\r\n// 重複ポイントを削除（GPSの精度による微小な揺れを除去）\r\nexport function removeDuplicatePoints(\r\n  points: { lat: number; lng: number }[],\r\n  minDistance = 0.00001, // 約1メートル\r\n): { lat: number; lng: number }[] {\r\n  if (points.length <= 1) {\r\n    return points\r\n  }\r\n\r\n  const result: { lat: number; lng: number }[] = [points[0]]\r\n\r\n  for (let i = 1; i < points.length; i++) {\r\n    const prev = result[result.length - 1]\r\n    const curr = points[i]\r\n\r\n    const distance = Math.sqrt(Math.pow(curr.lat - prev.lat, 2) + Math.pow(curr.lng - prev.lng, 2))\r\n\r\n    if (distance >= minDistance) {\r\n      result.push(curr)\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\nexport async function snapToRoads(\r\n  points: { lat: number; lng: number }[],\r\n): Promise<{ lat: number; lng: number }[] | null> {\r\n  try {\r\n    // OSRM has a limit of 100 points per request\r\n    // First simplify to reduce points if necessary\r\n    let processedPoints = points\r\n    if (points.length > 100) {\r\n      processedPoints = simplifyRoute(points, 0.0002) // More aggressive simplification\r\n      console.log(`[v0] Reduced points for OSRM: ${points.length} → ${processedPoints.length}`)\r\n    }\r\n\r\n    // Format coordinates for OSRM: \"lng,lat;lng,lat;...\"\r\n    const coordinates = processedPoints.map((p) => `${p.lng},${p.lat}`).join(\";\")\r\n\r\n    // Call OSRM Map Matching API\r\n    const url = `https://router.project-osrm.org/match/v1/driving/${coordinates}?overview=full&geometries=geojson`\r\n\r\n    console.log(`[v0] Calling OSRM Map Matching API with ${processedPoints.length} points...`)\r\n\r\n    const response = await fetch(url)\r\n    if (!response.ok) {\r\n      throw new Error(`OSRM API error: ${response.status}`)\r\n    }\r\n\r\n    const data = await response.json()\r\n\r\n    if (data.code !== \"Ok\" || !data.matchings || data.matchings.length === 0) {\r\n      console.error(\"[v0] OSRM matching failed:\", data.message)\r\n      return null\r\n    }\r\n\r\n    // Extract matched coordinates\r\n    const matchedCoordinates = data.matchings[0].geometry.coordinates.map((coord: [number, number]) => ({\r\n      lng: coord[0],\r\n      lat: coord[1],\r\n    }))\r\n\r\n    console.log(`[v0] OSRM Map Matching successful: ${processedPoints.length} → ${matchedCoordinates.length} points`)\r\n\r\n    return matchedCoordinates\r\n  } catch (error) {\r\n    console.error(\"[v0] Error in road snapping:\", error)\r\n    return null\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Documents/my-app/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\"\r\nimport {\r\n  getFirestore,\r\n  collection,\r\n  query,\r\n  orderBy,\r\n  onSnapshot,\r\n  Timestamp,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  setDoc,\r\n} from \"firebase/firestore\"\r\nimport type { LocationData, SavedRoute, ActiveRouteSettings, DaySchedule, MonthSchedule } from \"./types\"\r\nimport { simplifyRoute, removeDuplicatePoints, snapToRoads } from \"./utils/simplify-route\"\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\r\n}\r\n\r\n// Initialize Firebase (singleton pattern)\r\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0]\r\nconst db = getFirestore(app)\r\n\r\nexport { app, db }\r\n\r\nexport function getRealtimeLocations(\r\n  collectionName: string,\r\n  callback: (locations: LocationData[]) => void,\r\n): () => void {\r\n  const locationsRef = collection(db, collectionName)\r\n  const q = query(locationsRef, orderBy(\"timestamp\", \"asc\"))\r\n\r\n  const unsubscribe = onSnapshot(\r\n    q,\r\n    (snapshot) => {\r\n      const locations: LocationData[] = []\r\n      snapshot.forEach((doc) => {\r\n        const data = doc.data()\r\n        locations.push({\r\n          id: doc.id,\r\n          latitude: data.latitude,\r\n          longitude: data.longitude,\r\n          timestamp: data.timestamp instanceof Timestamp ? data.timestamp.toDate() : new Date(data.timestamp),\r\n          speed: data.speed,\r\n          accuracy: data.accuracy,\r\n        })\r\n      })\r\n      callback(locations)\r\n    },\r\n    (error) => {\r\n      console.error(\"[v0] Firestore error:\", error)\r\n    },\r\n  )\r\n\r\n  return unsubscribe\r\n}\r\n\r\nexport async function getActiveRoute(): Promise<string | null> {\r\n  try {\r\n    const docRef = doc(db, \"settings\", \"active-route\")\r\n    const docSnap = await getDoc(docRef)\r\n\r\n    if (docSnap.exists()) {\r\n      const data = docSnap.data() as ActiveRouteSettings\r\n      return data.routeId\r\n    }\r\n    return null\r\n  } catch (error) {\r\n    console.error(\"[v0] Error getting active route:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function getSavedRoute(routeId: string): Promise<SavedRoute | null> {\r\n  try {\r\n    const docRef = doc(db, \"saved-routes\", routeId)\r\n    const docSnap = await getDoc(docRef)\r\n\r\n    if (docSnap.exists()) {\r\n      return docSnap.data() as SavedRoute\r\n    }\r\n    return null\r\n  } catch (error) {\r\n    console.error(\"[v0] Error getting saved route:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function getSavedRoutes(): Promise<{ id: string; name: string; pointCount: number }[]> {\r\n  try {\r\n    const routesRef = collection(db, \"saved-routes\")\r\n    const snapshot = await getDocs(routesRef)\r\n    return snapshot.docs.map((docSnap) => {\r\n      const data = docSnap.data() as SavedRoute\r\n      return {\r\n        id: docSnap.id,\r\n        name: data.name || docSnap.id,\r\n        pointCount: data.points?.length || 0,\r\n      }\r\n    })\r\n  } catch (error) {\r\n    console.error(\"[v0] Error listing saved routes:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getDateCollections(): Promise<string[]> {\r\n  try {\r\n    const docRef = doc(db, \"date-index\", \"dates\")\r\n    const docSnap = await getDoc(docRef)\r\n\r\n    if (docSnap.exists()) {\r\n      const data = docSnap.data()\r\n      const dateList = data.dateList as string[]\r\n\r\n      // Sort by date descending (newest first)\r\n      return dateList.sort((a, b) => {\r\n        const dateA = a.split(\"_\")[0]\r\n        const dateB = b.split(\"_\")[0]\r\n        return dateB.localeCompare(dateA)\r\n      })\r\n    }\r\n\r\n    return []\r\n  } catch (error) {\r\n    console.error(\"[v0] Error getting date index:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function getAllLocationsFromCollection(collectionName: string): Promise<LocationData[]> {\r\n  try {\r\n    const locationsRef = collection(db, collectionName)\r\n    const q = query(locationsRef, orderBy(\"timestamp\", \"asc\"))\r\n    const snapshot = await getDocs(q)\r\n\r\n    const locations: LocationData[] = []\r\n    snapshot.forEach((doc) => {\r\n      const data = doc.data()\r\n      locations.push({\r\n        id: doc.id,\r\n        latitude: data.latitude,\r\n        longitude: data.longitude,\r\n        timestamp: data.timestamp instanceof Timestamp ? data.timestamp.toDate() : new Date(data.timestamp),\r\n        speed: data.speed,\r\n        accuracy: data.accuracy,\r\n      })\r\n    })\r\n\r\n    return locations\r\n  } catch (error) {\r\n    console.error(\"[v0] Error getting locations from collection:\", error)\r\n    return []\r\n  }\r\n}\r\n\r\nexport async function saveRouteAsActive(routeId: string, locations: LocationData[]): Promise<boolean> {\r\n  try {\r\n    const points = locations.map((loc) => ({\r\n      lat: loc.latitude,\r\n      lng: loc.longitude,\r\n      timestamp: loc.timestamp instanceof Date ? loc.timestamp.toISOString() : loc.timestamp,\r\n    }))\r\n\r\n    const deduplicated = removeDuplicatePoints(points)\r\n    console.log(`[v0] Step 1 - Deduplication: ${points.length} → ${deduplicated.length} points`)\r\n\r\n    const snapped = await snapToRoads(deduplicated)\r\n\r\n    let finalPoints: { lat: number; lng: number }[]\r\n\r\n    if (snapped) {\r\n      console.log(`[v0] Step 2 - Road snapping successful: ${snapped.length} points`)\r\n      finalPoints = snapped\r\n    } else {\r\n      console.log(\"[v0] Step 2 - Road snapping failed, using Douglas-Peucker instead\")\r\n      const simplified = simplifyRoute(deduplicated, 0.0001)\r\n      console.log(`[v0] Step 2 - Simplification: ${deduplicated.length} → ${simplified.length} points`)\r\n      finalPoints = simplified\r\n    }\r\n\r\n    // Save route data to /saved-routes/{routeId}\r\n    const routeDocRef = doc(db, \"saved-routes\", routeId)\r\n    const savedRoute: SavedRoute = {\r\n      name: `${routeId}のルート`,\r\n      createdAt: new Date().toISOString(),\r\n      points: finalPoints,\r\n    }\r\n    await setDoc(routeDocRef, savedRoute)\r\n\r\n    // Update /settings/active-route to point to this route\r\n    const settingsDocRef = doc(db, \"settings\", \"active-route\")\r\n    const activeSettings: ActiveRouteSettings = {\r\n      routeId: routeId,\r\n      updatedAt: new Date().toISOString(),\r\n    }\r\n    await setDoc(settingsDocRef, activeSettings)\r\n\r\n    return true\r\n  } catch (error) {\r\n    console.error(\"[v0] Error saving route:\", error)\r\n    return false\r\n  }\r\n}\r\n\r\nexport async function saveCustomRoute(\r\n  routeId: string,\r\n  points: [number, number][],\r\n  options?: { name?: string },\r\n): Promise<boolean> {\r\n  try {\r\n    const routeDocRef = doc(db, \"saved-routes\", routeId)\r\n    const savedRoute: SavedRoute = {\r\n      name: options?.name || `${routeId}のルート`,\r\n      createdAt: new Date().toISOString(),\r\n      points: points.map(([lat, lng]) => ({ lat, lng })),\r\n    }\r\n    await setDoc(routeDocRef, savedRoute)\r\n    return true\r\n  } catch (error) {\r\n    console.error(\"[v0] Error saving custom route:\", error)\r\n    return false\r\n  }\r\n}\r\n\r\nexport async function saveMonthSchedule(yearMonth: string, schedule: MonthSchedule): Promise<boolean> {\r\n  try {\r\n    const docRef = doc(db, \"schedules\", yearMonth)\r\n    await setDoc(docRef, {\r\n      yearMonth,\r\n      days: schedule,\r\n      updatedAt: new Date().toISOString(),\r\n    })\r\n    return true\r\n  } catch (error) {\r\n    console.error(\"[v0] Error saving schedule:\", error)\r\n    return false\r\n  }\r\n}\r\n\r\nexport async function getMonthSchedule(yearMonth: string): Promise<MonthSchedule | null> {\r\n  try {\r\n    const docRef = doc(db, \"schedules\", yearMonth)\r\n    const docSnap = await getDoc(docRef)\r\n\r\n    if (docSnap.exists()) {\r\n      const data = docSnap.data()\r\n      const schedule = data.days as MonthSchedule\r\n      // 後方互換性: 単一のDayScheduleを配列に変換\r\n      const normalized: MonthSchedule = {}\r\n      for (const [dateStr, daySchedule] of Object.entries(schedule)) {\r\n        if (Array.isArray(daySchedule)) {\r\n          normalized[dateStr] = daySchedule\r\n        } else {\r\n          normalized[dateStr] = [daySchedule]\r\n        }\r\n      }\r\n      return normalized\r\n    }\r\n    return null\r\n  } catch (error) {\r\n    console.error(\"[v0] Error getting schedule:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function getCurrentScheduleStatus(): Promise<{\r\n  isOperating: boolean\r\n  schedule: DaySchedule | null\r\n  nextOperation?: {\r\n    date: string\r\n    dayOfWeek: string\r\n    startTime: string\r\n    endTime: string\r\n    startLocation: string\r\n  }\r\n} | null> {\r\n  try {\r\n    const now = new Date()\r\n    const yearMonth = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, \"0\")}`\r\n    const dateStr = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, \"0\")}-${String(now.getDate()).padStart(2, \"0\")}`\r\n\r\n    const schedule = await getMonthSchedule(yearMonth)\r\n    if (!schedule || !schedule[dateStr]) {\r\n      const nextOp = await findNextOperation(now)\r\n      return { isOperating: false, schedule: null, nextOperation: nextOp }\r\n    }\r\n\r\n    const daySchedules = Array.isArray(schedule[dateStr]) ? schedule[dateStr] : [schedule[dateStr]]\r\n    const currentTime = `${String(now.getHours()).padStart(2, \"0\")}:${String(now.getMinutes()).padStart(2, \"0\")}`\r\n\r\n    // 現在の時間に該当するスケジュールを探す\r\n    const activeSchedule = daySchedules.find(\r\n      (s) => s.isOperating && currentTime >= s.startTime && currentTime <= s.endTime,\r\n    )\r\n\r\n    if (activeSchedule) {\r\n      return { isOperating: true, schedule: activeSchedule }\r\n    }\r\n\r\n    // 運行中ではない場合、次回の運行を探す\r\n    const nextOp = await findNextOperation(now)\r\n    return { isOperating: false, schedule: daySchedules[0] || null, nextOperation: nextOp }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error getting current schedule status:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\nasync function findNextOperation(fromDate: Date): Promise<\r\n  | {\r\n      date: string\r\n      dayOfWeek: string\r\n      startTime: string\r\n      endTime: string\r\n      startLocation: string\r\n    }\r\n  | undefined\r\n> {\r\n  try {\r\n    const dayNames = [\"日\", \"月\", \"火\", \"水\", \"木\", \"金\", \"土\"]\r\n\r\n    // 今日から30日後まで検索\r\n    for (let i = 0; i < 30; i++) {\r\n      const checkDate = new Date(fromDate)\r\n      checkDate.setDate(checkDate.getDate() + i)\r\n\r\n      const yearMonth = `${checkDate.getFullYear()}-${String(checkDate.getMonth() + 1).padStart(2, \"0\")}`\r\n      const dateStr = `${checkDate.getFullYear()}-${String(checkDate.getMonth() + 1).padStart(2, \"0\")}-${String(checkDate.getDate()).padStart(2, \"0\")}`\r\n\r\n      const schedule = await getMonthSchedule(yearMonth)\r\n      if (!schedule || !schedule[dateStr]) continue\r\n\r\n      const daySchedules = Array.isArray(schedule[dateStr]) ? schedule[dateStr] : [schedule[dateStr]]\r\n      const operatingSchedules = daySchedules.filter((s) => s.isOperating)\r\n\r\n      if (operatingSchedules.length === 0) continue\r\n\r\n      const currentTime = `${String(fromDate.getHours()).padStart(2, \"0\")}:${String(fromDate.getMinutes()).padStart(2, \"0\")}`\r\n\r\n      // 同日の場合は、運行開始時刻が現在時刻より後のスケジュールを探す\r\n      if (i === 0) {\r\n        const futureSchedules = operatingSchedules.filter((s) => s.startTime > currentTime)\r\n        if (futureSchedules.length > 0) {\r\n          // 最も近い未来のスケジュールを選択\r\n          const nextSchedule = futureSchedules.sort((a, b) => a.startTime.localeCompare(b.startTime))[0]\r\n          return {\r\n            date: `${checkDate.getMonth() + 1}/${checkDate.getDate()}`,\r\n            dayOfWeek: dayNames[checkDate.getDay()],\r\n            startTime: nextSchedule.startTime,\r\n            endTime: nextSchedule.endTime,\r\n            startLocation: nextSchedule.startLocation || \"ヤンマー前\",\r\n          }\r\n        }\r\n        // 今日の運行時間は過ぎているので次の日を探す\r\n        continue\r\n      }\r\n\r\n      // 他の日の場合は、最初のスケジュールを返す\r\n      const firstSchedule = operatingSchedules.sort((a, b) => a.startTime.localeCompare(b.startTime))[0]\r\n      return {\r\n        date: `${checkDate.getMonth() + 1}/${checkDate.getDate()}`,\r\n        dayOfWeek: dayNames[checkDate.getDay()],\r\n        startTime: firstSchedule.startTime,\r\n        endTime: firstSchedule.endTime,\r\n        startLocation: firstSchedule.startLocation || \"ヤンマー前\",\r\n      }\r\n    }\r\n\r\n    return undefined\r\n  } catch (error) {\r\n    console.error(\"[v0] Error finding next operation:\", error)\r\n    return undefined\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 552, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Documents/my-app/app/operator/route/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport { useRouter, useSearchParams } from \"next/navigation\"\r\nimport { MapWrapper } from \"@/components/map-wrapper\"\r\nimport {\r\n  getDateCollections,\r\n  getAllLocationsFromCollection,\r\n  saveRouteAsActive,\r\n  saveCustomRoute,\r\n  getSavedRoutes,\r\n  getSavedRoute,\r\n} from \"@/lib/firebase\"\r\nimport type { LocationData } from \"@/lib/types\"\r\nimport { ChevronLeft, ChevronRight, Check, X, ArrowLeft } from \"lucide-react\"\r\nimport type { Map as LeafletMap } from \"leaflet\"\r\n\r\nexport default function RouteManagement() {\r\n  const router = useRouter()\r\n  const searchParams = useSearchParams()\r\n\r\n  const selectMode = searchParams.get(\"selectMode\") === \"true\"\r\n  const scheduleDate = searchParams.get(\"date\")\r\n  const scheduleIndex = searchParams.get(\"scheduleIndex\")\r\n\r\n  const [dateCollections, setDateCollections] = useState<string[]>([])\r\n  const [currentIndex, setCurrentIndex] = useState(0)\r\n  const [locations, setLocations] = useState<LocationData[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [saving, setSaving] = useState(false)\r\n  const [message, setMessage] = useState(\"\")\r\n  const [editedRoute, setEditedRoute] = useState<[number, number][]>([])\r\n  const originalRouteRef = useRef<[number, number][]>([])\r\n  const [hasEdits, setHasEdits] = useState(false)\r\n  const [isEditing, setIsEditing] = useState(false)\r\n  const [customRouteName, setCustomRouteName] = useState(\"\")\r\n  const [mapInstance, setMapInstance] = useState<LeafletMap | null>(null)\r\n  const [isUsingOriginalBase, setIsUsingOriginalBase] = useState(true)\r\n  const [routeSource, setRouteSource] = useState<\"saved\" | \"create\">(\"saved\")\r\n  const [savedRoutes, setSavedRoutes] = useState<{ id: string; name: string; pointCount: number }[]>([])\r\n  const [selectedSavedRouteId, setSelectedSavedRouteId] = useState<string | null>(null)\r\n  const [baseRouteId, setBaseRouteId] = useState<string | null>(null)\r\n  const [baseRouteName, setBaseRouteName] = useState<string | null>(null)\r\n  const [isMobile, setIsMobile] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 640)\r\n    }\r\n    checkMobile()\r\n    window.addEventListener(\"resize\", checkMobile)\r\n    return () => window.removeEventListener(\"resize\", checkMobile)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    async function loadDateCollections() {\r\n      const collections = await getDateCollections()\r\n      setDateCollections(collections)\r\n      setLoading(false)\r\n    }\r\n    loadDateCollections()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    async function loadSavedRoutesList() {\r\n      const routes = await getSavedRoutes()\r\n      // 循環ルート1のみを表示\r\n      const filteredRoutes = routes.filter((route) => route.id === \"循環ルート1\" || route.name === \"循環ルート1\")\r\n      setSavedRoutes(filteredRoutes)\r\n    }\r\n    loadSavedRoutesList()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    // 保存済みルートが読み込まれ、routeSourceが\"saved\"で選択されていない場合、最初のルートを自動選択\r\n    if (savedRoutes.length > 0 && routeSource === \"saved\" && !selectedSavedRouteId) {\r\n      setSelectedSavedRouteId(savedRoutes[0].id)\r\n    }\r\n  }, [savedRoutes, routeSource, selectedSavedRouteId])\r\n\r\n  useEffect(() => {\r\n    // 新規ルート作成時は白紙から開始\r\n    if (routeSource === \"create\") {\r\n      originalRouteRef.current = []\r\n      setEditedRoute([])\r\n      setHasEdits(false)\r\n      setIsUsingOriginalBase(false)\r\n      setBaseRouteId(null)\r\n      setBaseRouteName(\"新規ルート\")\r\n      setLocations([])\r\n    }\r\n  }, [routeSource])\r\n\r\n  useEffect(() => {\r\n    if (!mapInstance || !isEditing) return\r\n\r\n    const handleMapClick = (event: any) => {\r\n      const latlng: [number, number] = [event.latlng.lat, event.latlng.lng]\r\n      setEditedRoute((prev) => {\r\n        setHasEdits(true)\r\n        if (isUsingOriginalBase) {\r\n          setIsUsingOriginalBase(false)\r\n          return [latlng]\r\n        }\r\n        return [...prev, latlng]\r\n      })\r\n    }\r\n\r\n    mapInstance.on(\"click\", handleMapClick)\r\n\r\n    return () => {\r\n      mapInstance.off(\"click\", handleMapClick)\r\n    }\r\n  }, [mapInstance, isEditing, isUsingOriginalBase])\r\n\r\n  useEffect(() => {\r\n    if (routeSource !== \"saved\") {\r\n      setSelectedSavedRouteId(null)\r\n      // 新規ルート作成時は確実にルートをクリア\r\n      if (routeSource === \"create\") {\r\n        originalRouteRef.current = []\r\n        setEditedRoute([])\r\n        setHasEdits(false)\r\n        setIsUsingOriginalBase(false)\r\n      }\r\n      return\r\n    }\r\n    if (savedRoutes.length > 0 && !selectedSavedRouteId) {\r\n      setSelectedSavedRouteId(savedRoutes[0].id)\r\n    } else if (selectedSavedRouteId && !savedRoutes.find((route) => route.id === selectedSavedRouteId)) {\r\n      setSelectedSavedRouteId(savedRoutes[0] ? savedRoutes[0].id : null)\r\n    }\r\n  }, [routeSource, savedRoutes, selectedSavedRouteId])\r\n\r\n  useEffect(() => {\r\n    if (routeSource !== \"saved\" || !selectedSavedRouteId) {\r\n      // 新規ルート作成時は確実にルートをクリア\r\n      if (routeSource === \"create\") {\r\n        originalRouteRef.current = []\r\n        setEditedRoute([])\r\n        setHasEdits(false)\r\n        setIsUsingOriginalBase(false)\r\n      }\r\n      return\r\n    }\r\n    const routeId = selectedSavedRouteId\r\n\r\n    async function loadSavedRouteData() {\r\n      setLoading(true)\r\n      const route = await getSavedRoute(routeId)\r\n      // routeSourceが変更された場合は処理を中断\r\n      if (routeSource !== \"saved\") {\r\n        setLoading(false)\r\n        return\r\n      }\r\n      if (route && route.points) {\r\n        const coords = route.points.map((point) => [point.lat, point.lng]) as [number, number][]\r\n        originalRouteRef.current = coords\r\n        setEditedRoute(coords)\r\n        setHasEdits(false)\r\n        setIsUsingOriginalBase(true)\r\n        setBaseRouteId(routeId)\r\n        setBaseRouteName(route.name || routeId)\r\n      } else {\r\n        originalRouteRef.current = []\r\n        setEditedRoute([])\r\n        setHasEdits(false)\r\n        setIsUsingOriginalBase(false)\r\n        setBaseRouteId(routeId)\r\n        setBaseRouteName(null)\r\n      }\r\n      setLoading(false)\r\n    }\r\n\r\n    loadSavedRouteData()\r\n  }, [routeSource, selectedSavedRouteId])\r\n\r\n  async function loadLocationsForCurrentDate() {\r\n    if (dateCollections.length === 0) return\r\n\r\n    const collectionName = dateCollections[currentIndex]\r\n\r\n    setLoading(true)\r\n    const locs = await getAllLocationsFromCollection(collectionName)\r\n    setLocations(locs)\r\n    setLoading(false)\r\n  }\r\n\r\n  function handleRouteSourceChange(source: \"saved\" | \"create\") {\r\n    // 新規ルート作成時は、routeSourceを変更する前に確実にルートをクリア\r\n    if (source === \"create\") {\r\n      originalRouteRef.current = []\r\n      setEditedRoute([])\r\n      setHasEdits(false)\r\n      setIsUsingOriginalBase(false)\r\n      setBaseRouteId(null)\r\n      setBaseRouteName(\"新規ルート\")\r\n      setLocations([])\r\n      setSelectedSavedRouteId(null)\r\n    }\r\n    setRouteSource(source)\r\n    setMessage(\"\")\r\n    setIsEditing(false)\r\n    if (source === \"saved\") {\r\n      setLocations([])\r\n      setBaseRouteId(null)\r\n      setBaseRouteName(null)\r\n    }\r\n  }\r\n\r\n  function handlePrevious() {\r\n    if (routeSource !== \"create\") return\r\n    if (currentIndex < dateCollections.length - 1) {\r\n      setCurrentIndex(currentIndex + 1)\r\n      setMessage(\"\")\r\n    }\r\n  }\r\n\r\n  function handleNext() {\r\n    if (routeSource !== \"create\") return\r\n    if (currentIndex > 0) {\r\n      setCurrentIndex(currentIndex - 1)\r\n      setMessage(\"\")\r\n    }\r\n  }\r\n\r\n  function handleUndoPoint() {\r\n    setEditedRoute((prev) => {\r\n      if (prev.length === 0) {\r\n        return prev\r\n      }\r\n      setHasEdits(true)\r\n      if (isUsingOriginalBase) {\r\n        setIsUsingOriginalBase(false)\r\n      }\r\n      return prev.slice(0, -1)\r\n    })\r\n  }\r\n\r\n  function handleClearRoute() {\r\n    setEditedRoute([])\r\n    setHasEdits(true)\r\n    setIsUsingOriginalBase(false)\r\n  }\r\n\r\n  function handleResetRoute() {\r\n    setEditedRoute([...originalRouteRef.current])\r\n    setHasEdits(false)\r\n    setIsUsingOriginalBase(true)\r\n  }\r\n\r\n  function handleStartFromBlank() {\r\n    originalRouteRef.current = []\r\n    setEditedRoute([])\r\n    setHasEdits(true)\r\n    setIsUsingOriginalBase(false)\r\n    setBaseRouteId(null)\r\n    setBaseRouteName(\"新規ルート\")\r\n  }\r\n\r\n  const buildLocationDataFromRoute = (points: [number, number][]): LocationData[] => {\r\n    const start = Date.now()\r\n    return points.map(([lat, lng], index) => ({\r\n      id: `custom-${index}`,\r\n      latitude: lat,\r\n      longitude: lng,\r\n      timestamp: new Date(start + index * 1000).toISOString(),\r\n    }))\r\n  }\r\n\r\n  async function handleSetRoute() {\r\n    if (editedRoute.length === 0) {\r\n      setMessage(\"ルートが空です。ポイントを追加してください。\")\r\n      return\r\n    }\r\n\r\n    setSaving(true)\r\n    setMessage(\"\")\r\n\r\n    const trimmedName = customRouteName.trim()\r\n    const baseId = baseRouteId || `route-${Date.now()}`\r\n    const generatedId = `${baseId}-custom-${Date.now()}`\r\n    const shouldGenerateNewId = hasEdits || !baseRouteId\r\n    const routeId = shouldGenerateNewId ? trimmedName || generatedId : baseId\r\n    const fallbackName =\r\n      trimmedName ||\r\n      baseRouteName ||\r\n      (routeSource === \"create\" && formattedDate ? `${formattedDate}のルート` : null) ||\r\n      routeId\r\n    const routeLocations = buildLocationDataFromRoute(editedRoute)\r\n\r\n    const success = await saveRouteAsActive(routeId, routeLocations)\r\n\r\n    if (success) {\r\n      setMessage(`${fallbackName}をアクティブに設定しました`)\r\n      setHasEdits(false)\r\n      setBaseRouteId(routeId)\r\n      setBaseRouteName(fallbackName)\r\n      if (shouldGenerateNewId) {\r\n        setCustomRouteName(\"\")\r\n        const routes = await getSavedRoutes()\r\n        const filteredRoutes = routes.filter((route) => route.id === \"循環ルート1\" || route.name === \"循環ルート1\")\r\n        setSavedRoutes(filteredRoutes)\r\n      }\r\n    } else {\r\n      setMessage(\"ルートの設定に失敗しました\")\r\n    }\r\n\r\n    setSaving(false)\r\n  }\r\n\r\n  async function handleSelectRoute() {\r\n    if (!selectMode || !scheduleDate) return\r\n    if (routeSource === \"create\" && editedRoute.length === 0) {\r\n      setMessage(\"ルートが空です。ポイントを追加してください。\")\r\n      return\r\n    }\r\n    if (routeSource === \"saved\" && (!selectedSavedRouteId || editedRoute.length === 0)) {\r\n      setMessage(\"ルートが選択されていないか、ルートデータが読み込まれていません。\")\r\n      return\r\n    }\r\n\r\n    let routeId: string\r\n    if (routeSource === \"saved\" && baseRouteId) {\r\n      // 保存済みルート選択時は、baseRouteIdをそのまま使用\r\n      routeId = baseRouteId\r\n    } else {\r\n      routeId = baseRouteId || `route-${Date.now()}`\r\n    }\r\n    const trimmedName = customRouteName.trim()\r\n    const fallbackName =\r\n      trimmedName ||\r\n      baseRouteName ||\r\n      (routeSource === \"create\" && formattedDate ? `${formattedDate}のルート` : null) ||\r\n      routeId\r\n\r\n    if (routeSource === \"create\" && (hasEdits || !baseRouteId)) {\r\n      const newRouteId = trimmedName || `${routeId}-custom-${Date.now()}`\r\n      const routeName = trimmedName || fallbackName || newRouteId\r\n      const success = await saveCustomRoute(newRouteId, editedRoute, { name: routeName })\r\n      if (!success) {\r\n        setMessage(\"カスタムルートの保存に失敗しました\")\r\n        return\r\n      }\r\n      routeId = newRouteId\r\n      setHasEdits(false)\r\n      setCustomRouteName(\"\")\r\n      setBaseRouteId(newRouteId)\r\n      setBaseRouteName(routeName)\r\n      setIsUsingOriginalBase(true)\r\n      const routes = await getSavedRoutes()\r\n      const filteredRoutes = routes.filter((route) => route.id === \"循環ルート1\" || route.name === \"循環ルート1\")\r\n      setSavedRoutes(filteredRoutes)\r\n    }\r\n\r\n    const scheduleIndexParam = scheduleIndex ? `&scheduleIndex=${encodeURIComponent(scheduleIndex)}` : \"\"\r\n    const targetUrl = `/operator?selectedRoute=${encodeURIComponent(routeId)}&date=${encodeURIComponent(scheduleDate)}${scheduleIndexParam}`\r\n    router.push(targetUrl)\r\n  }\r\n\r\n  function handleCancel() {\r\n    router.push(\"/operator\")\r\n  }\r\n\r\n  function handleBackToSchedule() {\r\n    router.push(\"/operator\")\r\n  }\r\n\r\n  const currentDate = dateCollections[currentIndex]\r\n  const formattedDate = currentDate\r\n    ? `${currentDate.slice(0, 4)}年${currentDate.slice(4, 6)}月${currentDate.slice(6, 8)}日`\r\n    : \"\"\r\n\r\n  const selectedSavedRoute = savedRoutes.find((route) => route.id === selectedSavedRouteId) || null\r\n\r\n  const routeCoordinates = useMemo(() => {\r\n    // 新規ルート作成時は常に空配列を返す\r\n    if (routeSource === \"create\") {\r\n      return []\r\n    }\r\n    return editedRoute\r\n  }, [routeSource, editedRoute])\r\n\r\n  return (\r\n    <div style={{ width: \"100%\", height: \"100%\", position: \"relative\" }}>\r\n      {/* Map */}\r\n      <MapWrapper \r\n        key={`map-${routeSource}-${routeSource === \"saved\" ? selectedSavedRouteId : \"create\"}`}\r\n        locations={[]} \r\n        plannedRoute={routeCoordinates} \r\n        onMapReady={setMapInstance} \r\n      />\r\n\r\n      {/* Loading Overlay */}\r\n      {loading && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            inset: 0,\r\n            backgroundColor: \"rgba(255, 255, 255, 0.8)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            zIndex: 2000,\r\n          }}\r\n        >\r\n          <div style={{ fontSize: 16, color: \"#6b7280\" }}>読み込み中...</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Back Button */}\r\n      {!selectMode && (\r\n        <button\r\n          onClick={handleBackToSchedule}\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 16,\r\n            left: 16,\r\n            zIndex: 1001,\r\n            width: 48,\r\n            height: 48,\r\n            borderRadius: 9999,\r\n            backgroundColor: \"rgba(255, 255, 255, 0.95)\",\r\n            border: \"none\",\r\n            cursor: \"pointer\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\",\r\n          }}\r\n        >\r\n          <ArrowLeft size={24} color=\"#1f2937\" />\r\n        </button>\r\n      )}\r\n\r\n      {/* Header */}\r\n      <div\r\n        style={{\r\n          position: \"fixed\",\r\n          top: 16,\r\n          left: 16,\r\n          right: 16,\r\n          zIndex: 1000,\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          gap: 12,\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <div style={{ display: \"flex\", gap: 12, flexWrap: \"wrap\", justifyContent: \"center\" }}>\r\n          {[\r\n            { key: \"saved\", label: \"保存済みルートから選択\" },\r\n            { key: \"create\", label: \"新規ルートを作成\" },\r\n          ].map((option) => {\r\n            const active = routeSource === option.key\r\n            return (\r\n              <button\r\n                key={option.key}\r\n                onClick={() => handleRouteSourceChange(option.key as \"saved\" | \"create\")}\r\n                style={{\r\n                  padding: \"10px 18px\",\r\n                  borderRadius: 9999,\r\n                  border: \"1px solid\",\r\n                  borderColor: active ? \"#2563eb\" : \"#d1d5db\",\r\n                  backgroundColor: active ? \"#2563eb\" : \"white\",\r\n                  color: active ? \"white\" : \"#374151\",\r\n                  fontWeight: 600,\r\n                  cursor: \"pointer\",\r\n                  minWidth: 180,\r\n                }}\r\n              >\r\n                {option.label}\r\n              </button>\r\n            )\r\n          })}\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            maxWidth: 720,\r\n            backgroundColor: \"rgba(255, 255, 255, 0.95)\",\r\n            borderRadius: 16,\r\n            padding: \"16px 24px\",\r\n            boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)\",\r\n          }}\r\n        >\r\n          {routeSource === \"create\" ? (\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <div style={{ fontSize: 18, fontWeight: 700, color: \"#1f2937\" }}>新規ルート作成</div>\r\n              <div style={{ fontSize: 14, color: \"#6b7280\", marginTop: 4 }}>{editedRoute.length}ポイント</div>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <div style={{ fontSize: 16, fontWeight: 700, color: \"#1f2937\", marginBottom: 12 }}>保存済みルート</div>\r\n              {savedRoutes.length === 0 ? (\r\n                <p style={{ fontSize: 14, color: \"#6b7280\" }}>保存されたルートがありません。新規作成してください。</p>\r\n              ) : (\r\n                <>\r\n                  <div style={{ fontSize: 14, color: \"#4b5563\", marginBottom: 12 }}>\r\n                    {selectedSavedRoute ? selectedSavedRoute.name : \"ルートを選択\"}\r\n                  </div>\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexWrap: \"wrap\",\r\n                      gap: 8,\r\n                      maxHeight: 160,\r\n                      overflowY: \"auto\",\r\n                    }}\r\n                  >\r\n                    {savedRoutes.map((route) => {\r\n                      const active = route.id === selectedSavedRouteId\r\n                      return (\r\n                        <button\r\n                          key={route.id}\r\n                          onClick={() => setSelectedSavedRouteId(route.id)}\r\n                          style={{\r\n                            flex: \"1 1 200px\",\r\n                            padding: \"10px 12px\",\r\n                            borderRadius: 12,\r\n                            border: \"1px solid\",\r\n                            borderColor: active ? \"#2563eb\" : \"#d1d5db\",\r\n                            backgroundColor: active ? \"rgba(37,99,235,0.1)\" : \"white\",\r\n                            cursor: \"pointer\",\r\n                            textAlign: \"left\",\r\n                          }}\r\n                        >\r\n                          <div style={{ fontWeight: 600, color: active ? \"#1d4ed8\" : \"#1f2937\" }}>{route.name}</div>\r\n                          <div style={{ fontSize: 12, color: \"#6b7280\" }}>{route.pointCount}ポイント</div>\r\n                        </button>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Editing Panel */}\r\n      {routeSource === \"create\" && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            bottom: isMobile ? 120 : 200,\r\n            left: isMobile ? 8 : 16,\r\n            right: isMobile ? 8 : 16,\r\n            zIndex: 1000,\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            maxWidth: isMobile ? \"100%\" : 480,\r\n            backgroundColor: \"rgba(255, 255, 255, 0.95)\",\r\n            borderRadius: isMobile ? 12 : 16,\r\n            padding: isMobile ? 12 : 16,\r\n            boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\",\r\n          }}\r\n        >\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", gap: isMobile ? 8 : 12 }}>\r\n            <div>\r\n              <div style={{ fontWeight: 700, color: \"#1f2937\", fontSize: isMobile ? 14 : 16 }}>ルート編集</div>\r\n              <div style={{ fontSize: isMobile ? 11 : 12, color: \"#6b7280\" }}>{editedRoute.length}ポイント</div>\r\n            </div>\r\n            <button\r\n              onClick={() => setIsEditing((prev) => !prev)}\r\n              style={{\r\n                padding: isMobile ? \"8px 12px\" : \"10px 16px\",\r\n                borderRadius: isMobile ? 10 : 12,\r\n                border: \"none\",\r\n                fontSize: isMobile ? 12 : 14,\r\n                fontWeight: 600,\r\n                backgroundColor: isEditing ? \"#f97316\" : \"#2563eb\",\r\n                color: \"white\",\r\n                cursor: \"pointer\",\r\n                minWidth: isMobile ? 100 : 120,\r\n              }}\r\n            >\r\n              {isEditing ? \"終了\" : \"編集\"}\r\n            </button>\r\n          </div>\r\n          {hasEdits && (\r\n            <div style={{ marginTop: isMobile ? 6 : 8, fontSize: isMobile ? 11 : 12, color: \"#dc2626\", fontWeight: 600 }}>未保存の変更があります</div>\r\n          )}\r\n          {isEditing && (\r\n            <>\r\n              <p style={{ marginTop: isMobile ? 8 : 12, fontSize: isMobile ? 11 : 12, color: \"#374151\", lineHeight: 1.5 }}>\r\n                地図をタップするとポイントを追加できます。スマホでもピンチ操作でズームしながら編集できます。\r\n              </p>\r\n              <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: isMobile ? 6 : 8, marginTop: isMobile ? 8 : 12 }}>\r\n                <button\r\n                  onClick={handleUndoPoint}\r\n                  style={{\r\n                    flex: 1,\r\n                    minWidth: isMobile ? 80 : 120,\r\n                    padding: isMobile ? \"8px 10px\" : \"10px 12px\",\r\n                    borderRadius: isMobile ? 8 : 10,\r\n                    border: \"1px solid #d1d5db\",\r\n                    backgroundColor: \"white\",\r\n                    cursor: \"pointer\",\r\n                    fontSize: isMobile ? 12 : 14,\r\n                  }}\r\n                >\r\n                  最後を削除\r\n                </button>\r\n                <button\r\n                  onClick={handleClearRoute}\r\n                  style={{\r\n                    flex: 1,\r\n                    minWidth: isMobile ? 80 : 120,\r\n                    padding: isMobile ? \"8px 10px\" : \"10px 12px\",\r\n                    borderRadius: isMobile ? 8 : 10,\r\n                    border: \"1px solid #d1d5db\",\r\n                    backgroundColor: \"white\",\r\n                    cursor: \"pointer\",\r\n                    fontSize: isMobile ? 12 : 14,\r\n                  }}\r\n                >\r\n                  すべて削除\r\n                </button>\r\n                <button\r\n                  onClick={handleResetRoute}\r\n                  style={{\r\n                    flex: 1,\r\n                    minWidth: isMobile ? 80 : 120,\r\n                    padding: isMobile ? \"8px 10px\" : \"10px 12px\",\r\n                    borderRadius: isMobile ? 8 : 10,\r\n                    border: \"1px solid #d1d5db\",\r\n                    backgroundColor: \"white\",\r\n                    cursor: \"pointer\",\r\n                    fontSize: isMobile ? 12 : 14,\r\n                  }}\r\n                >\r\n                  元に戻す\r\n                </button>\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                value={customRouteName}\r\n                onChange={(e) => setCustomRouteName(e.target.value)}\r\n                placeholder=\"カスタムルート名（任意）\"\r\n                style={{\r\n                  marginTop: isMobile ? 8 : 12,\r\n                  width: \"100%\",\r\n                  padding: isMobile ? \"10px 12px\" : \"12px 14px\",\r\n                  borderRadius: isMobile ? 10 : 12,\r\n                  border: \"1px solid #d1d5db\",\r\n                  fontSize: isMobile ? 12 : 14,\r\n                  boxSizing: \"border-box\",\r\n                }}\r\n              />\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n      )}\r\n\r\n      {/* Set Route Button */}\r\n      <div\r\n        style={{\r\n          position: \"fixed\",\r\n          bottom: isMobile ? 16 : 96,\r\n          left: \"50%\",\r\n          transform: \"translateX(-50%)\",\r\n          zIndex: 1000,\r\n          display: \"flex\",\r\n          gap: isMobile ? 8 : 12,\r\n          width: isMobile ? \"calc(100% - 32px)\" : \"auto\",\r\n          maxWidth: isMobile ? \"none\" : 600,\r\n          padding: 0,\r\n          boxSizing: \"border-box\",\r\n        }}\r\n      >\r\n        {selectMode ? (\r\n          <>\r\n            <button\r\n              onClick={handleCancel}\r\n              style={{\r\n                backgroundColor: \"#6b7280\",\r\n                color: \"white\",\r\n                padding: isMobile ? \"8px 12px\" : \"12px 20px\",\r\n                borderRadius: isMobile ? 10 : 14,\r\n                border: \"none\",\r\n                fontSize: isMobile ? 12 : 15,\r\n                fontWeight: 700,\r\n                cursor: \"pointer\",\r\n                boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: isMobile ? 4 : 6,\r\n                whiteSpace: \"nowrap\",\r\n              }}\r\n            >\r\n              <X size={isMobile ? 14 : 18} />\r\n              キャンセル\r\n            </button>\r\n            <button\r\n              onClick={handleSelectRoute}\r\n              disabled={\r\n                (routeSource === \"create\" && editedRoute.length === 0) ||\r\n                (routeSource === \"saved\" && (!selectedSavedRouteId || editedRoute.length === 0))\r\n              }\r\n              style={{\r\n                backgroundColor:\r\n                  (routeSource === \"create\" && editedRoute.length === 0) ||\r\n                  (routeSource === \"saved\" && (!selectedSavedRouteId || editedRoute.length === 0))\r\n                    ? \"#9ca3af\"\r\n                    : \"#3b82f6\",\r\n                color: \"white\",\r\n                padding: isMobile ? \"8px 16px\" : \"12px 24px\",\r\n                borderRadius: isMobile ? 10 : 14,\r\n                border: \"none\",\r\n                fontSize: isMobile ? 12 : 15,\r\n                fontWeight: 700,\r\n                cursor:\r\n                  (routeSource === \"create\" && editedRoute.length === 0) ||\r\n                  (routeSource === \"saved\" && (!selectedSavedRouteId || editedRoute.length === 0))\r\n                    ? \"not-allowed\"\r\n                    : \"pointer\",\r\n                boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: isMobile ? 4 : 6,\r\n                whiteSpace: \"nowrap\",\r\n                maxWidth: isMobile ? \"none\" : 300,\r\n              }}\r\n            >\r\n              <Check size={isMobile ? 14 : 18} />\r\n              {isMobile ? \"設定\" : \"このルートを設定する\"}\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <button\r\n            onClick={handleSetRoute}\r\n            disabled={saving || locations.length === 0}\r\n            style={{\r\n              backgroundColor: saving || locations.length === 0 ? \"#9ca3af\" : \"#10b981\",\r\n              color: \"white\",\r\n              padding: isMobile ? \"8px 16px\" : \"12px 24px\",\r\n              borderRadius: isMobile ? 10 : 14,\r\n              border: \"none\",\r\n              fontSize: isMobile ? 12 : 15,\r\n              fontWeight: 700,\r\n              cursor: saving || locations.length === 0 ? \"not-allowed\" : \"pointer\",\r\n              boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: isMobile ? 4 : 6,\r\n              whiteSpace: \"nowrap\",\r\n              maxWidth: isMobile ? \"none\" : 300,\r\n            }}\r\n          >\r\n            <Check size={isMobile ? 14 : 18} />\r\n            {saving ? \"設定中...\" : isMobile ? \"設定\" : \"このルートを設定\"}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Message */}\r\n      {message && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 100,\r\n            left: \"50%\",\r\n            transform: \"translateX(-50%)\",\r\n            zIndex: 1001,\r\n            backgroundColor: \"rgba(16, 185, 129, 0.95)\",\r\n            color: \"white\",\r\n            padding: \"12px 24px\",\r\n            borderRadius: 12,\r\n            fontSize: 14,\r\n            fontWeight: 600,\r\n            boxShadow: \"0 4px 6px -1px rgba(0, 0, 0, 0.1)\",\r\n          }}\r\n        >\r\n          {message}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}